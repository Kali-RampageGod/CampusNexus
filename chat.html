<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CampusChat — Discover & Join</title>
  <style>
    /* Reset */
    *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    :root{
      --bg1:#f7fbff; --accent:#4f46e5; --muted:#6b7280; --card:#ffffff; --glass:rgba(255,255,255,0.6);
      --success:#10b981; --danger:#ef4444; --shadow:0 8px 30px rgba(16,24,40,0.08);
    }

    html,body,#app{height:100%}
    body{
      background:linear-gradient(120deg,var(--bg1),#eef2ff);
      display:flex;align-items:center;justify-content:center;padding:28px;gap:24px;
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
    }

    /* Moving soft shapes background */
    .hero-bg{
      position:fixed;inset:0;z-index:-2;overflow:hidden;pointer-events:none;
    }
    .blob{
      position:absolute;width:600px;height:600px;border-radius:50%;filter:blur(80px);opacity:.55;mix-blend-mode:screen;animation:float 12s ease-in-out infinite;
    }
    .b1{background:radial-gradient(circle at 30% 30%, #60a5fa,#7c3aed 40%, transparent 60%);left:-20%;top:-10%;}
    .b2{background:radial-gradient(circle at 70% 70%, #34d399,#60a5fa 35%, transparent 60%);right:-15%;bottom:-15%;animation-duration:18s}
    .b3{background:radial-gradient(circle at 50% 50%, #fb7185,#f97316 30%, transparent 60%);left:20%;bottom:-5%;animation-duration:15s}
    @keyframes float{0%{transform:translateY(0) scale(1)}50%{transform:translateY(-30px) scale(1.03)}100%{transform:translateY(0) scale(1)}}

    /* Container */
    .container{width:1200px;max-width:100%;display:grid;grid-template-columns:360px 1fr;gap:22px}

    /* Left panel - hero + features + participants */
    .left{background:linear-gradient(180deg,rgba(255,255,255,0.8),var(--card));backdrop-filter:blur(8px);border-radius:16px;padding:18px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:14px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:20px;box-shadow:0 6px 18px rgba(99,102,241,0.25)}
    .title{font-size:18px;font-weight:700;color:#0f172a}
    .subtitle{font-size:13px;color:var(--muted)}

    /* Feature catalogue */
    .features{margin-top:6px}
    .feature-track{display:flex;gap:10px;overflow:hidden;padding-bottom:6px}
    .feature{min-width:220px;background:linear-gradient(180deg,white, #fbfdff);border-radius:12px;padding:12px;box-shadow:0 6px 20px rgba(2,6,23,0.04);transition:transform .28s cubic-bezier(.2,.9,.3,1),box-shadow .28s;cursor:pointer}
    .feature:hover{transform:translateY(-8px) rotate(-0.5deg);box-shadow:0 20px 40px rgba(15,23,42,0.08)}
    .feature h4{font-size:14px;margin-bottom:6px}
    .feature p{font-size:12px;color:var(--muted)}

    /* Participants */
    .participants{margin-top:8px}
    .participants h3{font-size:13px;color:var(--muted);margin-bottom:8px}
    .user-list{display:flex;flex-direction:column;gap:8px}
    .user{display:flex;align-items:center;gap:10px;padding:8px;border-radius:10px;transition:background .18s,transform .18s;cursor:pointer}
    .user:hover{background:rgba(99,102,241,0.05);transform:translateX(6px)}
    .avatar{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#f97316,#fb7185);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    .meta{display:flex;flex-direction:column}
    .name{font-weight:600}
    .role{font-size:12px;color:var(--muted)}

    /* Right - chat pane */
    .right{background:linear-gradient(180deg,var(--card),#fff);border-radius:16px;padding:14px;display:flex;flex-direction:column;min-height:600px;box-shadow:var(--shadow)}
    .chat-header{display:flex;align-items:center;justify-content:space-between;padding:6px 4px;border-bottom:1px solid #f1f5f9}
    .chat-title{display:flex;gap:12px;align-items:center}
    .status{font-size:12px;color:var(--muted)}
    .tag{padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,#eef2ff,#f0f9ff);font-weight:600;font-size:12px}

    .messages{flex:1;padding:18px;display:flex;flex-direction:column;gap:12px;overflow:auto}
    .msg{max-width:70%;padding:12px;border-radius:12px;background:linear-gradient(180deg,#f8fafc,#fff);box-shadow:0 6px 18px rgba(16,24,40,0.03);animation:pop .18s ease}
    .msg.me{margin-left:auto;background:linear-gradient(180deg,#eef2ff,#eef5ff);border-bottom-right-radius:4px}
    .msg .meta{font-size:12px;color:var(--muted);margin-bottom:6px}
    .msg .text{font-size:14px;color:#0f172a;white-space:pre-wrap}
    @keyframes pop{0%{opacity:0;transform:translateY(6px)}100%{opacity:1;transform:none}}

    .input-area{display:flex;gap:8px;padding:12px;border-top:1px solid #f1f5f9}
    .input{flex:1;display:flex;gap:8px;align-items:center;padding:10px;border-radius:12px;background:linear-gradient(180deg,#fbfdff,#fff);box-shadow:inset 0 1px 0 rgba(2,6,23,0.02)}
    .input input{flex:1;border:0;outline:none;padding:8px;font-size:14px}
    .actions{display:flex;gap:8px}
    button{background:var(--accent);color:white;border:0;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer;transition:transform .12s}
    button:hover{transform:translateY(-3px);box-shadow:0 14px 30px rgba(79,70,229,0.12)}
    .btn-ghost{background:transparent;color:var(--accent);border:1px solid rgba(79,70,229,0.12)}

    /* Typing indicator */
    .typing{display:flex;gap:6px;align-items:center}
    .dot{width:7px;height:7px;border-radius:50%;background:#c7c7c7;animation:bounce 1s infinite}
    .dot:nth-child(2){animation-delay:.12s}
    .dot:nth-child(3){animation-delay:.24s}
    @keyframes bounce{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}

    /* Modal for Join */
    .modal{position:fixed;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.35);z-index:40;}
    .modal-card{background:var(--card);padding:18px;border-radius:12px;width:420px;box-shadow:0 30px 80px rgba(2,6,23,0.16)}
    .field{display:flex;flex-direction:column;margin-bottom:10px}
    label{font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type=text],select,textarea{padding:10px;border-radius:8px;border:1px solid #e6edf7;outline:none}

    /* small screens */
    @media (max-width:920px){.container{grid-template-columns:1fr;}.left{order:2}.right{order:1;min-height:520px}}

  </style>
</head>
<body>
  <div class="hero-bg" aria-hidden>
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>
  </div>

  <div id="app" class="container">

    <aside class="left">
      <div class="brand">
        <div class="logo">CN</div>
        <div>
          <div class="title">CampusNexus</div>
          <div class="subtitle">Discover clubs · Connect with faculty · Join projects</div>
        </div>
      </div>

      <div class="features">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:6px">
          <strong>Highlights</strong>
          <small class="status"> • Hover to pause</small>
        </div>
        <div id="featureTrack" class="feature-track" onmouseover="pauseCarousel()" onmouseout="resumeCarousel()">
          <div class="feature" data-role="feature-1">
            <h4>Smart Recommendations</h4>
            <p>Matches clubs & projects to students using interests & skills — faster onboarding.</p>
          </div>
          <div class="feature" data-role="feature-2">
            <h4>Role-based Chat</h4>
            <p>Students, faculty, club leaders — talk in channels or one-to-one with clear badges.</p>
          </div>
          <div class="feature" data-role="feature-3">
            <h4>Easy Recruitment</h4>
            <p>Leaders post drives, accept members, and collect simple join requests from students.</p>
          </div>
          <div class="feature" data-role="feature-4">
            <h4>Events & Notices</h4>
            <p>Announcements pinned to the top and optionally pushed to group chats.</p>
          </div>
        </div>
      </div>

      <div class="participants">
        <h3>Participants</h3>
        <div class="user-list" id="participantsList">
          <!-- JS will populate -->
        </div>
        <div style="display:flex;gap:8px;margin-top:10px">
          <button class="btn-ghost" id="openJoin">Join Club</button>
          <button id="clearBtn" class="btn-ghost">Clear Chat</button>
        </div>
      </div>
    </aside>

    <section class="right">
      <div class="chat-header">
        <div class="chat-title">
          <div style="width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#7c3aed,#60a5fa);display:flex;align-items:center;justify-content:center;color:white;font-weight:700">CN</div>
          <div>
            <div style="font-weight:800">CampusNexus</div>
            
          </div>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <div class="tag">Smart Platform</div>
          <div style="font-size:12px;color:var(--muted)">Your role:</div>
          <select id="roleSelect" style="padding:8px;border-radius:8px;border:1px solid #e8eefc">
            <option value="student">Student</option>
            <option value="faculty">Faculty</option>
            <option value="leader">Club Leader</option>
          </select>
        </div>
      </div>

      <div id="messages" class="messages" aria-live="polite" aria-atomic>
        <!-- messages appended here -->
      </div>

      <div class="input-area">
        <div class="input">
          <input id="msgInput" placeholder="Write a message, e.g. 'Looking for project partners in ML'" />
          <select id="targetSelect" style="padding:8px;border-radius:8px;border:1px solid #e8eefc">
            <option value="all">Public • All</option>
            <option value="faculty">@ Faculty</option>
            <option value="leaders">@ Club Leaders</option>
            <option value="private">Private DM</option>
          </select>
        </div>
        <div class="actions">
          <button id="sendBtn">Send</button>
        </div>
      </div>
    </section>

  </div>

  <!-- Modal -->
  <div id="modal" class="modal" style="display:none">
    <div class="modal-card">
      <h3 style="margin-bottom:10px">Join a Club</h3>
      <div class="field"><label>Full name</label><input id="joinName" type="text" placeholder="Your name"/></div>
      <div class="field"><label>Email / Roll No</label><input id="joinEmail" type="text" placeholder="e.g. atul@example.edu"/></div>
      <div class="field"><label>Club</label><select id="joinClub"><option>Robotics</option><option>Cultural</option><option>Gymkhana</option><option>NSS</option></select></div>
      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:8px">
        <button id="closeModal" class="btn-ghost">Cancel</button>
        <button id="submitJoin">Request to Join</button>
      </div>
    </div>
  </div>

  <script>
    /* Demo participants data */
    const participants = [
      {id:1,name:'Aisha Patel',role:'student',bio:'CS • Interested in AI'},
      {id:2,name:'Dr. R. Mehta',role:'faculty',bio:'Associate Prof, EE'},
      {id:3,name:'Club: Robotics',role:'leader',bio:'President'},
      {id:4,name:'Club: Cultural',role:'leader',bio:'Coordinator'},
      {id:5,name:'Vikram',role:'student',bio:'Design & Frontend'}
    ];

    const participantsList = document.getElementById('participantsList');
    const messagesEl = document.getElementById('messages');
    const roleSelect = document.getElementById('roleSelect');
    const sendBtn = document.getElementById('sendBtn');
    const msgInput = document.getElementById('msgInput');
    const targetSelect = document.getElementById('targetSelect');
    const openJoin = document.getElementById('openJoin');
    const modal = document.getElementById('modal');
    const closeModal = document.getElementById('closeModal');
    const submitJoin = document.getElementById('submitJoin');
    const clearBtn = document.getElementById('clearBtn');

    function renderParticipants(){
      participantsList.innerHTML='';
      participants.forEach(p=>{
        const el = document.createElement('div');
        el.className='user';
        el.innerHTML = `<div class="avatar">${p.name.split(' ').map(n=>n[0]) .slice(0,2).join('')}</div>
          <div class="meta"><div class="name">${p.name}</div><div class="role">${p.role} · ${p.bio}</div></div>`;
        el.addEventListener('click',()=>{openPrivateChat(p)});
        participantsList.appendChild(el);
      })
    }

    function openPrivateChat(p){
      
      targetSelect.value = 'private';
      msgInput.focus();
      appendSystemMessage(`You will send a private message to ${p.name}.`)
    }

   
    const STORAGE_KEY = 'campuschat_demo';
    let chat = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

    function saveChat(){localStorage.setItem(STORAGE_KEY,JSON.stringify(chat))}

    function appendSystemMessage(text){
      const msg={id:Date.now(),who:'system',text}
      chat.push(msg);saveChat();renderMessages();scrollBottom();
    }

    function appendMessage(who,role,target,text){
      const msg={id:Date.now(),who,role,target,text}
      chat.push(msg);saveChat();renderMessages();scrollBottom();
    }

    function renderMessages(){
      messagesEl.innerHTML='';
      chat.forEach(m=>{
        const el = document.createElement('div');
        if(m.who==='system'){
          el.className='msg'; el.style.background='linear-gradient(90deg,#fff7ed,#fffbeb)'; el.innerHTML = `<div class="meta"><strong>Notice</strong></div><div class="text">${m.text}</div>`;
        } else {
          const me = (m.who==='me');
          el.className='msg'+(me?' me':'');
          el.innerHTML = `<div class="meta"><strong>${m.who} ${m.role?`· ${m.role}`:''}</strong> <span style="font-size:12px;color:var(--muted);margin-left:8px">${m.target && m.target!=='all' ? '['+m.target+']':''}</span></div>
            <div class="text">${escapeHtml(m.text)}</div>`;
        }
        messagesEl.appendChild(el);
      })
    }

    function escapeHtml(str){return str.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;')}

    function scrollBottom(){messagesEl.scrollTop = messagesEl.scrollHeight}

    /* sending */
    sendBtn.addEventListener('click',()=>{
      const text = msgInput.value.trim(); if(!text) return;
      const role = roleSelect.value; const target = targetSelect.value;
      appendMessage('me',role,target,text); msgInput.value='';
      // simulate reply for demo
      setTimeout(()=>simulateReply(role,target,text),800 + Math.random()*1200);
    });

    msgInput.addEventListener('keydown',e=>{if(e.key==='Enter' && !e.shiftKey){e.preventDefault();sendBtn.click();}})

    function simulateReply(role,target,text){
      // Simple heuristic replies
      const replies = {
        student:["I'd love to join that.","When is the next meeting?","Can you share more details about roles?"],
        faculty:["Thanks for reaching out. Please email me.","That's a good initiative. Let's discuss.","I'll add this to the next lecture notes."] ,
        leader:["We're recruiting — please send your CV.","Welcome! Fill the join form.","Follow our event page for details."]
      }
      const pick = replies[role] || replies.student;
      const textReply = pick[Math.floor(Math.random()*pick.length)];
      appendMessage(randomParticipantName(role),role,target,textReply);
    }

    function randomParticipantName(role){
      // return a participant matching role or random
      const filtered = participants.filter(p=>p.role===role || (role==='leader' && p.role==='leader'));
      if(filtered.length) return filtered[Math.floor(Math.random()*filtered.length)].name;
      return participants[Math.floor(Math.random()*participants.length)].name;
    }

    /* modal */
    openJoin.addEventListener('click',()=>{modal.style.display='flex'});
    closeModal.addEventListener('click',()=>{modal.style.display='none'});
    submitJoin.addEventListener('click',()=>{
      const n=document.getElementById('joinName').value.trim();
      const e=document.getElementById('joinEmail').value.trim();
      const c=document.getElementById('joinClub').value;
      if(!n || !e){alert('Please fill name and email');return}
      appendMessage(n,'student','Club-'+c,`Requested to join ${c} • Contact: ${e}`);
      modal.style.display='none';document.getElementById('joinName').value='';document.getElementById('joinEmail').value='';
    });

    clearBtn.addEventListener('click',()=>{if(confirm('Clear local chat history?')){chat=[];saveChat();renderMessages();}})

    /* initial render */
    renderParticipants();renderMessages();scrollBottom();

    /* Feature carousel auto-scroll */
    const track = document.getElementById('featureTrack');
    let carouselId = null;
    function startCarousel(){carouselId = setInterval(()=>{track.scrollBy({left:230,behavior:'smooth'}); if(track.scrollLeft + track.clientWidth >= track.scrollWidth-2) track.scrollTo({left:0,behavior:'smooth'})},3000)}
    function pauseCarousel(){ if(carouselId) clearInterval(carouselId)}
    function resumeCarousel(){ pauseCarousel(); startCarousel() }
    startCarousel();

    /* small UX: show typing indicator when input focused */
    msgInput.addEventListener('focus',()=>{const el=document.createElement('div');el.className='msg';el.id='typingInd';el.innerHTML='<div class="meta"><strong>Typing…</strong></div><div class="text"><div class="typing"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>' ;messagesEl.appendChild(el);scrollBottom();});
    msgInput.addEventListener('blur',()=>{const t=document.getElementById('typingInd'); if(t) t.remove();});

    /* helpful keyboard shortcuts */
    window.addEventListener('keydown',e=>{if((e.ctrlKey||e.metaKey) && e.key==='k'){e.preventDefault();msgInput.focus();}})

    /* onboarding notice */
    if(!chat.length) appendSystemMessage('Welcome to CampusChat — select your role on the top-right, type a message and press Send. Use "Join Club" to request membership. This demo stores chat locally only.')

  </script>
</body>
</html>
